<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <title>ðŸŽ¨ Virtual Painter</title>
  <style>
    body {
      background: #f2f2f2;
      font-family: sans-serif;
      padding: 20px;
    }

    canvas {
      border: 2px solid black;
      background: white;
    }
  </style>
</head>

<body>
  <!-- Drawing canvas -->
  <canvas id="drawingCanvas" width="800" height="600"></canvas>

  <script>
  const socket = new WebSocket("ws://localhost:8080/draw");
  const canvas = document.getElementById("drawingCanvas");
  const ctx = canvas.getContext("2d");
  let lastX = null, lastY = null;

  socket.onmessage = function (event) {
    const data = JSON.parse(event.data);

    // ðŸ”´ Clear the canvas
    if (data.mode === "clear") {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      lastX = lastY = null;
      return;
    }

    const x = data.x;
    const y = data.y;

    if (lastX !== null && lastY !== null) {
      ctx.strokeStyle = "red";
      ctx.lineWidth = 2;
      ctx.beginPath();
      ctx.moveTo(lastX, lastY);
      ctx.lineTo(x, y);
      ctx.stroke();
    }

    lastX = x;
    lastY = y;
  };
</script>

</body>

</html>
